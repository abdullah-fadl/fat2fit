# دليل إعداد Odoo للتكامل مع Fat2Fit

## 1. عنوان Odoo (URL)

### إذا كان Odoo مثبت على سيرفر:
- عنوان URL هو عنوان موقع Odoo الخاص بك
- مثال: `https://odoo.yourcompany.com`
- مثال: `https://odoo.example.com`
- مثال: `http://192.168.1.100:8069` (للمحلي)

### كيفية معرفته:
1. افتح متصفح الإنترنت
2. أدخل عنوان Odoo الذي تستخدمه عادة
3. انسخ العنوان من شريط العنوان في المتصفح
4. تأكد من إضافة `http://` أو `https://` في البداية

---

## 2. قاعدة البيانات (Database)

### للوصول لمعلومات قاعدة البيانات:

1. **افتح Odoo في المتصفح**
2. **اضغط على أيقونة قاعدة البيانات** (عادة في شريط العنوان أو في صفحة تسجيل الدخول)
3. **أو من صفحة تسجيل الدخول:**
   - إذا ظهرت لك قائمة اختيار قاعدة البيانات، هذا هو اسم قاعدة البيانات
   - مثال: `my_company`, `odoo_db`, `production_db`

### إذا لم تكن متأكداً:
1. **اسأل مدير النظام** في شركتك
2. **أو افحص ملف إعدادات Odoo** على السيرفر
3. **أو في صفحة Odoo الرئيسية**، اضغط على أيقونة المستخدم → Preferences → سترى اسم قاعدة البيانات

---

## 3. اسم المستخدم (Username)

### هذا سهل:
1. **افتح Odoo**
2. **اسجل دخول** بحساب المدير (Admin)
3. **اسم المستخدم** هو الذي تستخدمه لتسجيل الدخول
   - مثال: `admin`
   - مثال: `administrator`
   - مثال: `your_username`

### ملاحظة:
- يجب أن يكون المستخدم لديه صلاحيات كاملة (Administrator)
- أو على الأقل صلاحيات لإنشاء وتعديل الشركاء (Partners) والفواتير (Invoices) والمدفوعات (Payments)

---

## 4. API Key / كلمة المرور

### الطريقة الأولى: استخدام كلمة المرور (الأسهل)

1. **افتح Odoo**
2. **اسجل دخول** بحساب المدير
3. **استخدم كلمة المرور** التي تستخدمها عادة لتسجيل الدخول
4. **أدخلها في حقل "API Key / كلمة المرور"**

### الطريقة الثانية: إنشاء API Key (الأكثر أماناً)

#### في Odoo 16 والإصدارات الأحدث:

1. **سجل دخول إلى Odoo**
2. **اذهب إلى:**
   - Settings (الإعدادات)
   - Users & Companies (المستخدمون والشركات)
   - Users (المستخدمون)
3. **اختر المستخدم** (أو أنشئ مستخدم جديد للتكامل)
4. **اضغط على "Edit" (تعديل)**
5. **ابحث عن قسم "API Keys" أو "Access Rights"**
6. **اضغط على "Generate API Key" أو "Create API Key"**
7. **انسخ API Key** (سيظهر مرة واحدة فقط!)
8. **احفظها** في مكان آمن

#### في Odoo 15 والإصدارات الأقدم:

1. **سجل دخول إلى Odoo**
2. **اذهب إلى:** Settings → Users → Users
3. **اختر المستخدم**
4. **في تبويب "Access Rights"**
5. **ابحث عن "API Keys"**
6. **أو استخدم كلمة المرور مباشرة**

---

## 5. خطوات الإعداد الكاملة

### الخطوة 1: تأكد من تفعيل XML-RPC في Odoo

افتح ملف الإعدادات في Odoo (عادة `odoo.conf`):

```ini
[options]
xmlrpc = True
xmlrpc_interface = 0.0.0.0
xmlrpc_port = 8069
```

### الخطوة 2: تأكد من الصلاحيات

المستخدم يجب أن يكون لديه صلاحيات:
- ✅ إنشاء وتعديل الشركاء (Partners)
- ✅ إنشاء وتعديل الفواتير (Account Invoice)
- ✅ إنشاء وتعديل المدفوعات (Account Payment)

### الخطوة 3: أدخل البيانات في Fat2Fit

1. **افتح Fat2Fit**
2. **اذهب إلى:** إعدادات Odoo
3. **أدخل:**
   - URL: `https://your-odoo-url.com` (بدون `/xmlrpc/2` في النهاية)
   - Database: اسم قاعدة البيانات
   - Username: اسم المستخدم
   - API Key: كلمة المرور أو API Key
4. **اضغط على "حفظ"**
5. **اضغط على "اختبار الاتصال"** للتأكد من نجاح الاتصال

---

## 6. استكشاف الأخطاء

### خطأ: "Connection failed"
- ✅ تأكد من صحة URL
- ✅ تأكد من أن Odoo يعمل
- ✅ تأكد من أن XML-RPC مفعل
- ✅ تأكد من عدم وجود جدار ناري يمنع الاتصال

### خطأ: "Authentication failed"
- ✅ تأكد من صحة اسم المستخدم
- ✅ تأكد من صحة كلمة المرور/API Key
- ✅ تأكد من صحة اسم قاعدة البيانات

### خطأ: "Database not found"
- ✅ تأكد من صحة اسم قاعدة البيانات
- ✅ تأكد من أن قاعدة البيانات موجودة في Odoo

---

## 7. أمثلة شائعة

### مثال 1: Odoo محلي
```
URL: http://localhost:8069
Database: odoo_db
Username: admin
API Key: admin
```

### مثال 2: Odoo على سيرفر
```
URL: https://odoo.mycompany.com
Database: production_db
Username: admin
API Key: your_secure_password
```

### مثال 3: Odoo Cloud (الأكثر شيوعاً) ⭐
**إذا كنت تستخدم Odoo.com (Odoo Cloud):**

1. **URL:** سيكون مثل `https://yourcompany.odoo.com`
   - افتح Odoo Cloud في المتصفح
   - انسخ العنوان من شريط العنوان
   - مثال: `https://mycompany.odoo.com`

2. **Database:** اسم قاعدة البيانات في Odoo Cloud
   - عادة يكون نفس اسم الشركة/المشروع
   - مثال: `mycompany` أو `mycompany-production`
   - يمكنك معرفته من صفحة تسجيل الدخول أو من مدير النظام

3. **Username:** اسم المستخدم في Odoo Cloud
   - عادة `admin` أو اسم المستخدم الخاص بك
   - مثال: `admin` أو `your_email@example.com`

4. **API Key:**
   - **الطريقة الأسهل:** استخدم كلمة المرور الخاصة بك لتسجيل الدخول
   - **الطريقة الآمنة:** اذهب إلى Odoo Cloud → Settings → Users → اختر المستخدم → Preferences → API Keys → Generate API Key

**مثال كامل لـ Odoo Cloud:**
```
URL: https://mycompany.odoo.com
Database: mycompany
Username: admin
API Key: your_password_or_api_key
```

**⚠️ ملاحظة مهمة:**
- اسم قاعدة البيانات في Odoo Cloud عادة يكون **اسم المشروع فقط** (بدون .odoo.com)
- إذا كان URL هو `https://bperformance-scop.odoo.com`، فقاعدة البيانات قد تكون `bperformance-scop` (وليس `bperformance-scop.odoo.com`)
- يمكنك معرفة اسم قاعدة البيانات الصحيح من:
  - صفحة تسجيل الدخول في Odoo Cloud (سيظهر في قائمة اختيار)
  - Settings → Preferences في Odoo
  - أو اسأل مدير النظام

**ملاحظات مهمة لـ Odoo Cloud:**
- ✅ يجب أن يكون المستخدم لديه صلاحيات كاملة (Administrator)
- ✅ تأكد من تفعيل API Access في إعدادات Odoo Cloud
- ✅ قد تحتاج لتفعيل XML-RPC في إعدادات Odoo (عادة يكون مفعل افتراضياً في Cloud)

---

## ملاحظات مهمة

⚠️ **أمان:**
- استخدم API Key بدلاً من كلمة المرور إن أمكن
- لا تشارك معلومات الاتصال مع أي شخص
- احفظ المعلومات في مكان آمن

✅ **نصائح:**
- اختبر الاتصال بعد إدخال البيانات
- تحقق من المزامنة بعد إنشاء فاتورة
- راجع سجلات المزامنة في Odoo للتأكد من نجاح العملية

---

## الدعم

إذا واجهت أي مشاكل:
1. تحقق من سجلات Odoo (Logs)
2. تحقق من سجلات Fat2Fit (Console)
3. تأكد من إصدار Odoo (يجب أن يكون 12+)
4. اتصل بدعم Odoo إذا لزم الأمر

