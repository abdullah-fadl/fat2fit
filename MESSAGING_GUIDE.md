# ๐ฑ ุฏููู ูุธุงู ุงูุชูุงุตู ูุงูุชุณููู

## ุงูููุฒุงุช ุงููุชููุฑุฉ:

### 1. ุฑุณุงุฆู SMS/WhatsApp ุชููุงุฆูุฉ โ
- ุฅุฑุณุงู ุฑุณุงุฆู SMS ุฃู WhatsApp ููุนูููุงุช
- ุฏุนู ูุชุบูุฑุงุช ุฏููุงููููุฉ ูู ุงููุตูุต ({name}, {membershipNumber}, etc.)
- ุชุชุจุน ุญุงูุฉ ุงูุฑุณุงุฆู (ุชู ุงูุฅุฑุณุงูุ ุชู ุงูุชุณูููุ ูุดู)

### 2. ุญููุงุช ุชุณููููุฉ ููุฌูุฉ โ
- ุฅูุดุงุก ุญููุงุช ุชุณููููุฉ ูุฎุตุตุฉ
- ุงุณุชูุฏุงู ูุฆุงุช ูุฎุชููุฉ:
  - ุฌููุน ุงูุนูููุงุช
  - ุงูุงุดุชุฑุงูุงุช ุงููุดุทุฉ
  - ุงูุงุดุชุฑุงูุงุช ุงูููุชููุฉ ูุฑูุจุงู
- ุฌุฏููุฉ ุงูุญููุงุช ุฃู ุฅุฑุณุงููุง ููุฑุงู
- ุชุชุจุน ุฅุญุตุงุฆูุงุช ุงูุญููุฉ (ุนุฏุฏ ุงููุณุชููููุ ุงููุงุฌุญุฉุ ุงููุงุดูุฉ)

### 3. ุชุฐููุฑ ุจุงูุชูุงุก ุงูุงุดุชุฑุงู โ
- ุชุฐููุฑุงุช ุชููุงุฆูุฉ ูุจู ุงูุชูุงุก ุงูุงุดุชุฑุงู (7 ุฃูุงูุ 3 ุฃูุงูุ 1 ููู)
- ูุงุจู ููุชุฎุตูุต ูู ุฎูุงู ุงูุฅุนุฏุงุฏุงุช
- ุชุดุบูู ุชููุงุฆู ุนุจุฑ cron job

---

## ููููุฉ ุงูุงุณุชุฎุฏุงู:

### ุฅุฑุณุงู ุฑุณุงูุฉ ูุงุญุฏุฉ:

1. ุงุฐูุจ ุฅูู **ุงูุฑุณุงุฆู** ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
2. ููููู ุฅุฑุณุงู ุฑุณุงูุฉ ูุจุงุดุฑุฉ ุนุจุฑ API:
   ```javascript
   POST /api/messages
   {
     "clientId": "client-id",
     "phoneNumber": "05xxxxxxxx",
     "content": "ุนุฒูุฒุชู {name}ุ ุฑุณุงูุฉ ูุฎุตุตุฉ",
     "channel": "SMS" // or "WHATSAPP"
   }
   ```

### ุฅูุดุงุก ุญููุฉ ุชุณููููุฉ:

1. ุงุฐูุจ ุฅูู **ุงูุญููุงุช ุงูุชุณููููุฉ** โ **ุญููุฉ ุฌุฏูุฏุฉ**
2. ุงููุฃ ุงูุจูุงูุงุช:
   - **ุงุณู ุงูุญููุฉ**: ุงุณู ูุงุถุญ ููุญููุฉ
   - **ููุน ุงูุญููุฉ**: ุชุณููููุฉุ ุชุฐููุฑุ ุชุฑุญูุจ
   - **ุงูููุงุฉ**: SMS ุฃู WhatsApp
   - **ุงููุฆุฉ ุงููุณุชูุฏูุฉ**: ุงุฎุชุฑ ุงููุฆุฉ ุงูููุงุณุจุฉ
   - **ูุญุชูู ุงูุฑุณุงูุฉ**: ุงุณุชุฎุฏู ุงููุชุบูุฑุงุช ูุซู {name}, {membershipNumber}
3. ุงุฎุชุฑ:
   - **ุฅุฑุณุงู ููุฑุงู**: ูุจุฏุก ุงูุฅุฑุณุงู ูุจุงุดุฑุฉ
   - **ุงูุฌุฏููุฉ**: ูุชุญุฏูุฏ ููุช ุงูุฅุฑุณุงู ูุงุญูุงู
4. ุงุถุบุท **ุญูุธ ุงูุญููุฉ**

### ุงููุชุบูุฑุงุช ุงููุชุงุญุฉ ูู ุงูุฑุณุงุฆู:

- `{name}` - ุงุณู ุงูุนูููุฉ
- `{membershipNumber}` - ุฑูู ุงูุนุถููุฉ
- `{phone}` - ุฑูู ุงููุงุชู
- `{days}` - ุนุฏุฏ ุงูุฃูุงู (ูุซู: ุฃูุงู ูุจู ุงูุชูุงุก ุงูุงุดุชุฑุงู)
- `{packageName}` - ุงุณู ุงูุจุงูุฉ

---

## ุฅุนุฏุงุฏ ุงูุชุฐููุฑุงุช ุงูุชููุงุฆูุฉ:

### 1. ุฅุนุฏุงุฏ Cron Job:

ูุฅุฑุณุงู ุงูุชุฐููุฑุงุช ุงูุชููุงุฆูุฉ ุจุงูุชูุงุก ุงูุงุดุชุฑุงูุงุชุ ุฃุถู cron job:

```bash
# ููููุงู ุงูุณุงุนุฉ 9 ุตุจุงุญุงู
0 9 * * * curl -X POST https://your-domain.com/api/reminders/expiring-subscriptions -H "x-api-key: YOUR_INTERNAL_API_KEY"
```

ุฃู ุจุงุณุชุฎุฏุงู Node.js cron:

```javascript
const cron = require('node-cron');

// ูู ููู ุงูุณุงุนุฉ 9 ุตุจุงุญุงู
cron.schedule('0 9 * * *', async () => {
  await fetch('https://your-domain.com/api/reminders/expiring-subscriptions', {
    method: 'POST',
    headers: {
      'x-api-key': process.env.INTERNAL_API_KEY
    }
  });
});
```

### 2. ุฅุนุฏุงุฏ API Key:

ุฃุถู ุฅูู `.env`:
```env
INTERNAL_API_KEY=your-secret-api-key-here
```

### 3. ุชุฎุตูุต ุงูุชุฐููุฑุงุช:

ูููู ุชุฎุตูุต ุฃูุงู ุงูุชุฐููุฑ ูุฑุณุงุฆู ุงูุชุฐููุฑ ูู ุฎูุงู ุฌุฏูู `message_settings` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฃู ุนุจุฑ API (ูุฑูุจุงู).

---

## ุงูุชูุงูู ูุน ุฎุฏูุงุช SMS/WhatsApp:

### Twilio (SMS & WhatsApp):

1. ุณุฌู ุญุณุงุจ ูู [Twilio](https://www.twilio.com)
2. ุงุญุตู ุนูู:
   - Account SID
   - Auth Token
   - Phone Number (ูู SMS)
   - WhatsApp Phone Number (ูู WhatsApp)

3. ุฃุถู ุฅูู `.env`:
```env
TWILIO_ACCOUNT_SID=your_account_sid
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_WHATSAPP_NUMBER=whatsapp:+1234567890
```

4. ุนุฏูู `lib/messaging.ts` ูุฅุฒุงูุฉ ุงูุชุนูููุงุช ูุฅุถุงูุฉ ููุฏ Twilio.

### ุฎุฏูุงุช ูุญููุฉ:

ููููู ุชูุงูู ูุน ุฃู ุฎุฏูุฉ SMS/WhatsApp ูุญููุฉ ุนู ุทุฑูู ุชุนุฏูู ุฏูุงู `sendSMS` ู `sendWhatsApp` ูู `lib/messaging.ts`.

---

## API Endpoints:

### ุงูุฑุณุงุฆู:
- `GET /api/messages` - ูุงุฆูุฉ ุงูุฑุณุงุฆู
- `POST /api/messages` - ุฅุฑุณุงู ุฑุณุงูุฉ

### ุงูุญููุงุช:
- `GET /api/campaigns` - ูุงุฆูุฉ ุงูุญููุงุช
- `POST /api/campaigns` - ุฅูุดุงุก ุญููุฉ ุฌุฏูุฏุฉ
- `POST /api/campaigns/[id]/send` - ุจุฏุก ุฅุฑุณุงู ุญููุฉ

### ุงูุชุฐููุฑุงุช:
- `POST /api/reminders/expiring-subscriptions` - ุฅุฑุณุงู ุชุฐููุฑุงุช ุงูุชูุงุก ุงูุงุดุชุฑุงู (ูุชุทูุจ API Key)

---

## ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:

### ุนุฑุถ ุงูุฑุณุงุฆู:
- `MESSAGES_VIEW` - ุนุฑุถ ูุงุฆูุฉ ุงูุฑุณุงุฆู

### ุฅุฑุณุงู ุงูุฑุณุงุฆู:
- `MESSAGES_SEND` - ุฅุฑุณุงู ุฑุณุงุฆู ูุฑุฏูุฉ

### ุฅุฏุงุฑุฉ ุงูุญููุงุช:
- `CAMPAIGNS_VIEW` - ุนุฑุถ ุงูุญููุงุช
- `CAMPAIGNS_CREATE` - ุฅูุดุงุก ุญููุงุช ุฌุฏูุฏุฉ
- `CAMPAIGNS_MANAGE` - ุฅุฏุงุฑุฉ ูุชูุฏูุฉ (ุจุฏุก ุงูุฅุฑุณุงู)

**ุงูุฃุฏูุงุฑ:**
- **ADMIN**: ูู ุงูุตูุงุญูุงุช
- **RECEPTION**: ูููู ุฅูุดุงุก ูุฅุฑุณุงู ุงูุญููุงุช ูุงูุฑุณุงุฆู
- **TRAINER**: ูุง ูููููุง ุงููุตูู

---

## ููุงุญุธุงุช ูููุฉ:

1. **Rate Limiting**: ุชุฃูุฏ ูู ุงุญุชุฑุงู ุญุฏูุฏ ุงูุฅุฑุณุงู ูุฎุฏูุฉ SMS/WhatsApp ุงููุณุชุฎุฏูุฉ
2. **ุงูุชูุงููู**: ุจุนุถ ุฎุฏูุงุช SMS/WhatsApp ูุฏููุนุฉ - ุฑุงูุจ ุงูุงุณุชุฎุฏุงู
3. **ุงูุฎุตูุตูุฉ**: ุงุญุตู ุนูู ููุงููุฉ ุงูุนูููุงุช ูุจู ุฅุฑุณุงู ุงูุฑุณุงุฆู ุงูุชุณููููุฉ
4. **ุงูุชุฌุฑุจุฉ**: ุงุณุชุฎุฏู ูุถุน ุงูุชุทููุฑ (Development) ูุงุฎุชุจุงุฑ ุงูุฑุณุงุฆู ูุจู ุงูุฅูุชุงุฌ

---

โ **ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!**


